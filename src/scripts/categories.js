const categories = [
  {
    "name": 'Reino de Atena',
    "categoryDelay": '500',
    "classIdentify": 'l-categories__kingdomAtena',
    "subCategories": [
      {
        "preNameSub": "",
        "nameSub": "Os 12 Cavaleiros de Ouro",
        "image": 'https://i1.wp.com/nosomosnonos.com/wp-content/uploads/2020/11/caballeros-de-oro.png?resize=696%2C345&ssl=1',
        "link": '#',
        "amountPosts": 20,
        "amountTopics": 14,
        "lastPost": {
          "userName": "TaleCross",
          "titlePost": "O despertar",
          "postLink": "#",
          "dateTime": "2021-05-11 08:52:11"
        }
      },
      {
        "preNameSub": "",
        "nameSub": "Votação do Grande Mestre",
        "image": 'https://i.pinimg.com/originals/32/42/55/3242556450f0a79d9ce6741a6da8283a.png',
        "link": '#',
        "amountPosts": 12,
        "amountTopics": 5,
        "lastPost": {
          "userName": "Shion",
          "titlePost": "Sussuro Sombrio",
          "postLink": "#",
          "dateTime": "2021-05-07 08:52:11"
        }
      }
    ]
  },
  {
    "name": 'Reino de Hades',
    "categoryDelay": '600',
    "classIdentify": 'l-categories__kingdomHades',
    "subCategories": [
      {
        "preNameSub": "",
        "nameSub": "Os Juízes",
        "image": 'https://i.pinimg.com/originals/df/70/d1/df70d1beb042b73c1869ed35e3619706.jpg',
        "link": '#',
        "amountPosts": 21,
        "amountTopics": 8,
        "lastPost": {
          "userName": "Hatred",
          "titlePost": "Chamando o mal",
          "postLink": "#",
          "dateTime": "2021-05-01 23:52:11"
        }
      },
      {
        "preNameSub": "",
        "nameSub": "As Prisões de Hades",
        "image": 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRLqc77Dtz6EhojfoPanVxzBYDbKckTxY_JYg&usqp=CAU',
        "link": '#',
        "amountPosts": 39,
        "amountTopics": 11,
        "lastPost": {
          "userName": "Baltar",
          "titlePost": "Castigo para os pecadores",
          "postLink": "#",
          "dateTime": "2021-02-02 08:05:11"
        }
      }
    ]
  },
  {
    "name": 'Sistemas Gerais',
    "categoryDelay": '750',
    "classIdentify": 'l-categories__systemGeral',
    "subCategories": [
      {
        "preNameSub": "Sistema de",
        "nameSub": "Combate",
        "image": 'https://www.cavzodiaco.com.br/images20/saintia73_2.jpg',
        "link": '#',
        "amountPosts": 72,
        "amountTopics": 53,
        "lastPost": {
          "userName": "Quillian X",
          "titlePost": "Um novo dia",
          "postLink": "#",
          "dateTime": "2021-05-01 23:52:11"
        }
      },
      {
        "preNameSub": "Sistema de",
        "nameSub": "Sinergia",
        "image": 'https://hanablogjournal.files.wordpress.com/2019/03/e4d2e-01.jpg',
        "link": '#',
        "amountPosts": 2,
        "amountTopics": 1,
        "lastPost": {
          "userName": "Apogeu",
          "titlePost": "Sempre o grupo",
          "postLink": "#",
          "dateTime": "2021-02-02 08:05:11"
        }
      },
      {
        "preNameSub": "",
        "nameSub": "Localidades e Regiões",
        "image": 'https://i.ibb.co/wMmJ0Dp/20-1.png',
        "link": '#',
        "amountPosts": 6,
        "amountTopics": 1,
        "lastPost": {
          "userName": "Apogeu",
          "titlePost": "Bem vindo ao mundo de Apogeu",
          "postLink": "#",
          "dateTime": "2021-02-02 08:05:11"
        }
      },
      {
        "preNameSub": "Sistema de",
        "nameSub": "Representantes",
        "image": 'https://i.pinimg.com/originals/af/3b/66/af3b66943cc809bb71f1f22e9fced129.jpg',
        "link": '#',
        "amountPosts": 2,
        "amountTopics": 1,
        "lastPost": {
          "userName": "Apogeu",
          "titlePost": "Representante dos Deuses",
          "postLink": "#",
          "dateTime": "2021-02-02 08:05:11"
        }
      },
      {
        "preNameSub": "Sistema de",
        "nameSub": "Artefatos",
        "image": 'https://i.pinimg.com/originals/f0/6a/fe/f06afeb846300cffb4982d0bb49f528c.jpg',
        "link": '#',
        "amountPosts": 2,
        "amountTopics": 1,
        "lastPost": {
          "userName": "Apogeu",
          "titlePost": "Desvende e História",
          "postLink": "#",
          "dateTime": "2021-02-02 08:05:11"
        }
      },
      {
        "preNameSub": "Sistema de",
        "nameSub": "Vitalidade",
        "image": 'http://www.cavzodiaco.com.br/images13/lostcanvas/asmita/capitulo11.jpg',
        "link": '#',
        "amountPosts": 2,
        "amountTopics": 1,
        "lastPost": {
          "userName": "Apogeu",
          "titlePost": "Como vai sua Saúde?",
          "postLink": "#",
          "dateTime": "2021-02-02 08:05:11"
        }
      },
      {
        "preNameSub": "",
        "nameSub": "Fórmulas e Dados",
        "image": 'https://m.cavzodiaco.com.br/imagens-mangas/lostcanvas/gaidens/sage-e-hakurei-2/7.jpg',
        "link": '#',
        "amountPosts": 2,
        "amountTopics": 1,
        "lastPost": {
          "userName": "Apogeu",
          "titlePost": "Entendendo um pouco mais",
          "postLink": "#",
          "dateTime": "2021-02-02 08:05:11"
        }
      },
      {
        "preNameSub": "",
        "nameSub": "Títulos",
        "image": 'https://www.nautiljon.com/images/manga_persos/00/57/1575.jpg',
        "link": '#',
        "amountPosts": 2,
        "amountTopics": 1,
        "lastPost": {
          "userName": "Apogeu",
          "titlePost": "Reconhecimento",
          "postLink": "#",
          "dateTime": "2021-02-02 08:05:11"
        }
      },
      {
        "preNameSub": "Sistema de",
        "nameSub": "Mestres & Discipulos",
        "image": 'https://m.cavzodiaco.com.br/imagens-mangas/lostcanvas/gaidens/shion-1/8.jpg',
        "link": '#',
        "amountPosts": 74,
        "amountTopics": 23,
        "lastPost": {
          "userName": "Xia Long",
          "titlePost": "O Caminho do Dragão",
          "postLink": "#",
          "dateTime": "2021-02-23 14:05:11"
        }
      },
      {
        "preNameSub": "Sistema de",
        "nameSub": "Elementos",
        "image": 'http://nakoko.com/wp-content/uploads/2016/03/saint-seiya-episode-g-4010065.jpg',
        "link": '#',
        "amountPosts": 1,
        "amountTopics": 1,
        "lastPost": {
          "userName": "Apogeu",
          "titlePost": "Fraquezas e Forças",
          "postLink": "#",
          "dateTime": "2021-02-23 14:05:11"
        }
      },
      {
        "preNameSub": "Sistema de",
        "nameSub": "Integridade",
        "image": 'https://i.pinimg.com/originals/fe/80/bf/fe80bf3f44847975c3062266c2cebd0b.png',
        "link": '#',
        "amountPosts": 26,
        "amountTopics": 1,
        "lastPost": {
          "userName": "Perigeu",
          "titlePost": "Kloe - Um Novo All Star",
          "postLink": "#",
          "dateTime": "2021-02-23 14:05:11"
        }
      },
      {
        "preNameSub": "Sistema de",
        "nameSub": "Benção dos Deuses",
        "image": 'https://q5h6w3f2.rocketcdn.me/wp-content/uploads/2018/07/saint_seiya_the_lost_canvas_194_3-e1532371693474.jpg',
        "link": '#',
        "amountPosts": 13,
        "amountTopics": 10,
        "lastPost": {
          "userName": "Atena",
          "titlePost": "Hower, Eu te Abenço-o",
          "postLink": "#",
          "dateTime": "2021-02-23 14:05:11"
        }
      }
    ]
  },
  {
    "name": 'Evolução',
    "categoryDelay": '600',
    "classIdentify": 'l-categories__evolution',
    "subCategories": [
      {
        "preNameSub": "",
        "nameSub": "RP's",
        "image": 'http://greatprice760.weebly.com/uploads/1/2/4/1/124142052/705567092.jpg',
        "link": '#',
        "amountPosts": 3,
        "amountTopics": 1,
        "lastPost": {
          "userName": "Apogeu",
          "titlePost": "Vamos Interagir",
          "postLink": "#",
          "dateTime": "2021-05-01 23:52:11"
        }
      },
      {
        "preNameSub": "Sistema de",
        "nameSub": "Avaliação de Narrativa",
        "image": 'https://i.pinimg.com/474x/c8/16/98/c81698f5652110d36d16e057181b67db.jpg',
        "link": '#',
        "amountPosts": 3,
        "amountTopics": 1,
        "lastPost": {
          "userName": "Apogeu",
          "titlePost": "Como você será avaliado",
          "postLink": "#",
          "dateTime": "2021-02-02 08:05:11"
        }
      },
      {
        "preNameSub": "Sistemas de",
        "nameSub": "Treino",
        "image": 'http://bandofgeeks.fr/wp-content/uploads/2015/12/Saint-Seiya-manga-Seiya.jpg',
        "link": '#',
        "amountPosts": 7,
        "amountTopics": 6,
        "lastPost": {
          "userName": "Apogeu",
          "titlePost": "Vamos botar a mão na massa!",
          "postLink": "#",
          "dateTime": "2021-02-02 08:05:11"
        }
      },
      {
        "preNameSub": "Sistema de",
        "nameSub": "Retrocognição",
        "image": 'https://1.bp.blogspot.com/-bW1jNM9Ll6o/WFbZRN-A1bI/AAAAAAAAIAg/idKPUVNzlL4cZi5PEDRqTJx3p8-b5CcqgCLcB/s640/ErisKyokoTemp.png',
        "link": '#',
        "amountPosts": 32,
        "amountTopics": 11,
        "lastPost": {
          "userName": "Uncharted",
          "titlePost": "Uma velha lembrança",
          "postLink": "#",
          "dateTime": "2021-02-02 08:05:11"
        }
      },
      {
        "preNameSub": "Sistema de",
        "nameSub": "Morte",
        "image": 'https://lesanctuairedepromethee.files.wordpress.com/2020/08/saint-15-0323.jpg?w=742',
        "link": '#',
        "amountPosts": 7,
        "amountTopics": 6,
        "lastPost": {
          "userName": "Apogeu",
          "titlePost": "Vamos botar a mão na massa!",
          "postLink": "#",
          "dateTime": "2021-02-02 08:05:11"
        }
      },
      {
        "preNameSub": "Sistema de",
        "nameSub": "Reencarnação",
        "image": 'https://www.cavzodiaco.com.br/images18/saintia54_0.jpg',
        "link": '#',
        "amountPosts": 7,
        "amountTopics": 6,
        "lastPost": {
          "userName": "Apogeu",
          "titlePost": "Voltado Novamente!",
          "postLink": "#",
          "dateTime": "2021-02-02 08:05:11"
        }
      }
    ]
  },
  {
    "name": 'Off Topic',
    "categoryDelay": '700',
    "classIdentify": 'l-categories__offTopic',
    "subCategories": [
      {
        "preNameSub": "",
        "nameSub": "Jogos",
        "image": 'https://i.pinimg.com/originals/ed/43/96/ed439693195c75cb491d9a3fd1cf16ef.png',
        "link": '#',
        "amountPosts": 34,
        "amountTopics": 13,
        "lastPost": {
          "userName": "Allan Seisen",
          "titlePost": "O Ultimo a Postar",
          "postLink": "#",
          "dateTime": "2021-05-11 08:52:11"
        }
      },
      {
        "preNameSub": "",
        "nameSub": "Galeria",
        "image": 'https://2img.net/h/oi68.tinypic.com/ogxg5u.jpg',
        "link": '#',
        "amountPosts": 102,
        "amountTopics": 67,
        "lastPost": {
          "userName": "Allan Seisen",
          "titlePost": "Deusa Esculpida",
          "postLink": "#",
          "dateTime": "2021-05-11 08:52:11"
        }
      },
      {
        "preNameSub": "",
        "nameSub": "Flood",
        "image": 'https://i.pinimg.com/736x/d8/55/c8/d855c851c98381492e99da2c4880fb52.jpg',
        "link": '#',
        "amountPosts": 94,
        "amountTopics": 3,
        "lastPost": {
          "userName": "Alaster",
          "titlePost": "Podcast Saint Seiya",
          "postLink": "#",
          "dateTime": "2021-05-11 08:52:11"
        }
      },
      {
        "preNameSub": "",
        "nameSub": "Ausências e Despedidas",
        "image": 'http://nakoko.com/wp-content/uploads/2016/03/maxresdefault-4.jpg',
        "link": '#',
        "amountPosts": 1,
        "amountTopics": 1,
        "lastPost": {
          "userName": "Golack",
          "titlePost": "Foi uma Honra",
          "postLink": "#",
          "dateTime": "2021-05-11 08:52:11"
        }
      },
      {
        "preNameSub": "",
        "nameSub": "Testes",
        "image": 'https://i.pinimg.com/originals/2a/bd/83/2abd833b4077a6d38f26078fba031bd6.jpg',
        "link": '#',
        "amountPosts": 291,
        "amountTopics": 90,
        "lastPost": {
          "userName": "Max Swen",
          "titlePost": "Teste de Assinatura",
          "postLink": "#",
          "dateTime": "2021-05-11 08:52:11"
        }
      },
    ]
  },
]

window.addEventListener('load', function(){

  String.prototype.capitalize = function() {
    return this.charAt(0).toUpperCase() + this.slice(1);
  }

  const formatedString = (str, maxAmount) => {
    return str.length > maxAmount ? str.substr(0, maxAmount - 1) + '...' : str
  }

  const formatedDate = (datetime) => {
    let dateTimeFormated = new Date(datetime)
    let dayDateTime = dateTimeFormated.toLocaleDateString('pt-BR', {day: '2-digit'})
    let monthDateTime = dateTimeFormated.toLocaleDateString('pt-BR', {month: 'long'}).capitalize()

    return dayDateTime + ' de ' + monthDateTime
  }


  const factoryHTMLSubCategory = (elementDad, subCategory) => {

    const elementInsertHTML = document.querySelector('.' + elementDad + ' > .c-list__categories')
    const classesCategoryItem = 'c-category__item'
    const classesCategoryItemContent = 'c-category__itemContent'
    const classesCategoryItemContentData = 'c-category__itemData'
    const classesCategoryItemContentDataIcon = 'cp cp-book c-category__itemData--icon'
    const classesCategoryItemContentDataTopics = 'c-category__itemDataContent c-category__topics mt-4'
    const classesCategoryItemContentDataPosts = 'c-category__itemDataContent c-category__messages'
    const classesCategoryItemContentImage = 'c-category__itemImage'
    const classesCategoryItemContentBgOver = 'c-category__bgOverImage'
    const classesCategoryItemContentInfo = 'c-category__itemInfo'
    const classesCategoryItemContentInfoTitleContent = 'c-itemInfo__title'
    const classesCategoryItemContentInfoSubTitle = 'c-itemInfo__categorySubName'
    const classesCategoryItemContentInfoTitle = 'c-itemInfo__categoryName'
    const classesCategoryItemContentInfoUser = 'c-itemInfo__userPosts'
    const classesCategoryItemContentInfoUserPost = 'c-userPost__post'
    const classesCategoryItemContentInfoUserDate = 'c-userPost__time ms-1'
    const classesCategoryItemContentInfoUserName = 'c-userPost__user mb-0 ms-1'

    const htmlBaseCategory = [
      '<li class="' + classesCategoryItem + '">',
      '<div class="' + classesCategoryItemContent + '" role="contentinfo">',
      '<div class="' + classesCategoryItemContentData + '" role="contentinfo">',
      '<i class="' + classesCategoryItemContentDataIcon + '"></i>',
      '<p class="' + classesCategoryItemContentDataTopics + '">' + subCategory.amountTopics + ' Tópicos</p>',
      '<p class="' + classesCategoryItemContentDataPosts + '">' + subCategory.amountPosts + ' Posts</p>',
      '</div>',
      '<img src="' + subCategory.image + '" alt="Background de ' + subCategory.nameSub + ' " class="' + classesCategoryItemContentImage + '" />',
      '<div class="' + classesCategoryItemContentBgOver + '" role="img"></div>',
      '<div class="' + classesCategoryItemContentInfo + '" role="contentinfo">',
      '<section class="' + classesCategoryItemContentInfoTitleContent + '">',
      '<p class="' + classesCategoryItemContentInfoSubTitle + '">' + subCategory.preNameSub + '</p>',
      '<h4 class="' + classesCategoryItemContentInfoTitle + '">',
      '<a href="' +  subCategory.link + '">',
      subCategory.nameSub,
      '</a></h4>',
      '</section>',
      '<a class="' + classesCategoryItemContentInfoUser + '" href="' + subCategory.lastPost.postLink + '">',
      '<h5 class="' + classesCategoryItemContentInfoUserPost + '" title="' + subCategory.lastPost.titlePost + '">' + formatedString(subCategory.lastPost.titlePost, 15) + '</h5>',
      '<time class="' + classesCategoryItemContentInfoUserDate + '" datetime="' + subCategory.lastPost.dateTime + '">' + formatedDate(subCategory.lastPost.dateTime) + '</time>',
      '<p class="' + classesCategoryItemContentInfoUserName + '">por ' + subCategory.lastPost.userName + '</p>',
      '</a></div></div></li>'
    ]

    elementInsertHTML.insertAdjacentHTML('beforeend', htmlBaseCategory.join(''))

  }

  const factoryHTMLCategoryTitle = (sectionTitleCategory, sectionInsertTitle) => {

    const classesElementSection = 'col-12 mt-2 c-section__titleContent'
    const classesElementSectionTitle = 'c-section__title'
    const classesElementSectionBackground = 'c-section__imageBackground'

    let htmlTitle = [
      '<section class="' + classesElementSection +'">',
      '<h2 class="' + classesElementSectionTitle + '">' + sectionTitleCategory + '</h2>',
      '<div role="img" class="' + classesElementSectionBackground +'"></div>',
      '</section>'
    ]

    document.querySelector('.' + sectionInsertTitle).insertAdjacentHTML('afterbegin', htmlTitle.join(''))

  }

  const factoryHTMLCategory = (categoryData) => {

    const classesElementList = 'c-list__categories col-12'

    const elementCategory = this.document.querySelector('.l-categories')

    let htmlBase = [
      '<div class="' + categoryData.classIdentify + ' c-delay__' + categoryData.categoryDelay + '" role="contentinfo">',
      '<ul class="' + classesElementList + '">',
      '</ul>',
      '</div>'
    ]

    elementCategory.insertAdjacentHTML('beforeend', htmlBase.join(''))

    factoryHTMLCategoryTitle(categoryData.name, categoryData.classIdentify)

    categoryData.subCategories.forEach(subCategory => {
      factoryHTMLSubCategory(categoryData.classIdentify, subCategory)
    })

  }

  const factoryHTMLCategories = (categories) => {

    categories.forEach(category => {
      factoryHTMLCategory(category)
    })

  }

  factoryHTMLCategories(categories)

})